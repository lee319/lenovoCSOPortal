webpackJsonp([0],{"42Hy":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("//Fk"),a=s.n(i),n=s("YaEn"),o=(s("mtWM"),{name:"index",data:function(){return{paths:{},currentPage:"",openMenus:[],menuCache:[],showLoading:!1,hasNewMsg:!0,isShowRouter:!0,msgNum:"",tagsArry:[],arrowUp:!1,arrowDown:!0,isShowAsideTitle:!0,main:null,asideClassName:"aside-big",asideArrowIcons:[],crumbs:"主页",userName:"",userImg:""}},created:function(){var e=this;this.$http.interceptors.request.use(function(t){return e.showLoading=!0,t},function(t){return e.showLoading=!1,a.a.reject(t)}),this.$http.interceptors.response.use(function(t){return e.showLoading=!1,t},function(t){return e.showLoading=!1,a.a.reject(t)})},mounted:function(){var e=this,t=this.$route.name;this.currentPage=t,this.tagsArry.push({text:this.nameToTitle[t],name:t}),this.userName=localStorage.getItem("userName"),this.userImg=localStorage.getItem("userImg"),this.main=document.querySelector(".sec-right"),this.asideArrowIcons=document.querySelectorAll("aside .ivu-icon-ios-arrow-down");var s=document.documentElement.clientWidth||document.body.clientWidth;window.onresize=function(){s<1300&&e.isShowAsideTitle&&s>(document.documentElement.clientWidth||document.body.clientWidth)&&e.shrinkAside(),s=document.documentElement.clientWidth||document.body.clientWidth}},watch:{$route:function(e){var t=this,s=e.name;this.currentPage=s,"error"!=s?(this.keepAliveData.includes(s)||(8==this.tagsArry.length&&this.tagsArry.shift(),this.tagsArry.push({name:s,text:this.nameToTitle[s]})),setTimeout(function(){t.crumbs=t.paths[s]},0)):this.crumbs="404"}},computed:{menuItems:function(){return this.$store.state.menuItems},keepAliveData:function(){return this.tagsArry.map(function(e){return e.name})},nameToTitle:function(){var e=this,t={};return this.menuItems.forEach(function(s){e.processNameToTitle(t,s)}),t}},methods:{isActive:function(e){return this.$route.name===e},gotoPage:function(e,t){this.currentPage=e,this.crumbs=this.paths[e],this.$router.replace({name:e,params:t}),this.keepAliveData.includes(e)||(8==this.tagsArry.length&&this.tagsArry.shift(),this.tagsArry.push({name:e,text:this.nameToTitle[e]}))},userOperate:function(e){switch(e){case"1":this.gotoPage("password");break;case"2":this.gotoPage("userinfo");break;case"3":localStorage.setItem("token",""),localStorage.setItem("userImg",""),localStorage.setItem("userName",""),Object(n.c)(),this.$router.replace({name:"login"})}},showArrow:function(e){this.arrowUp=e,this.arrowDown=!e},isShrinkAside:function(){this.isShowAsideTitle?this.shrinkAside():this.expandAside()},shrinkAside:function(){var e=this;this.asideArrowIcons.forEach(function(e){e.style.display="none"}),this.isShowAsideTitle=!1,this.openMenus=[],this.$nextTick(function(){e.$refs.asideMenu.updateOpened()}),setTimeout(function(){e.asideClassName="",e.main.style.width="calc(100% - 80px)"},0)},expandAside:function(){var e=this;setTimeout(function(){e.isShowAsideTitle=!0,e.asideArrowIcons.forEach(function(e){e.style.display="block"}),e.openMenus=e.menuCache,e.$nextTick(function(){e.$refs.asideMenu.updateOpened()})},200),this.asideClassName="aside-big",this.main.style.width="calc(100% - 280px)"},reloadPage:function(){var e=this,t=this.$route.name,s=this.keepAliveData.indexOf(t);this.$nextTick(function(){e.tagsArry.length?(e.isShowRouter=!1,e.tagsArry.splice(s,1),e.$nextTick(function(){e.tagsArry.splice(s,0,{name:t,text:e.nameToTitle[t]}),e.gotoPage(t),e.isShowRouter=!0})):(e.isShowRouter=!1,e.$nextTick(function(){e.tagsArry.push({name:t,text:e.nameToTitle[t]}),e.gotoPage(t),e.isShowRouter=!0}))})},closeTag:function(e){var t=this.tagsArry[e].name;this.tagsArry.splice(e,1),event.stopPropagation(),this.tagsArry.length?this.isActive(t)&&(0!=e?this.gotoPage(this.tagsArry[e-1].name):this.gotoPage(this.tagsArry[e].name)):"home"!=t?this.gotoPage("home"):this.reloadPage()},closeName:function(e){for(var t=0,s=this.tagsArry.length;t<s;t++)if(this.tagsArry[t].name==e){this.closeTag(t);break}},closeTags:function(e){1==e?(this.tagsArry=[],this.gotoPage(this.$route.name)):(this.tagsArry=[],this.gotoPage("home"),this.reloadPage())},activeTag:function(e){this.gotoPage(this.tagsArry[e].name)},info:function(){var e=this;this.$Notice.info({title:"您有"+this.msgNum+"条消息",render:function(t){return t("Button",{attrs:{type:"info",size:"small"},on:{click:function(){e.gotoPage("msg"),e.hasNewMsg=!1,e.msgNum=0}}},["点击查看"])}})},menuChange:function(e){this.menuCache=e},processNameToTitle:function(e,t,s){var i=this;t.name&&(e[t.name]=t.text,this.paths[t.name]=s?s+" / "+t.text:t.text),t.children&&t.children.forEach(function(a){i.processNameToTitle(e,a,s?s+" / "+t.text:t.text)})}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index-vue"},[i("aside",{class:e.asideClassName},[i("div",{staticClass:"logo-c"},[i("img",{staticClass:"logo",attrs:{src:s("ZYYH"),alt:"logo"}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v("Lenovo CSO Portal")])]),e._v(" "),i("Menu",{ref:"asideMenu",attrs:{theme:"dark",width:"100%",accordion:"","open-names":e.openMenus,"active-name":e.currentPage},on:{"on-select":e.gotoPage,"on-open-change":e.menuChange}},e._l(e.menuItems,function(t,s){return i("div",{key:s},[t.children?i("Submenu",{attrs:{name:s}},[i("template",{slot:"title"},[i("Icon",{attrs:{size:t.size,type:t.type}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v(e._s(t.text))])],1),e._v(" "),e._l(t.children,function(t,a){return i("div",{key:s+a},[t.children?i("Submenu",{attrs:{name:s+"-"+a}},[i("template",{slot:"title"},[i("Icon",{attrs:{size:t.size,type:t.type}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v(e._s(t.text))])],1),e._v(" "),e._l(t.children,function(t,n){return i("MenuItem",{key:s+a+n,staticClass:"menu-level-3",attrs:{name:t.name}},[i("Icon",{attrs:{size:t.size,type:t.type}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v(e._s(t.text))])],1)})],2):i("MenuItem",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}],attrs:{name:t.name}},[i("Icon",{attrs:{size:t.size,type:t.type}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v(e._s(t.text))])],1)],1)})],2):i("MenuItem",{attrs:{name:t.name}},[i("Icon",{attrs:{size:t.size,type:t.type}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowAsideTitle,expression:"isShowAsideTitle"}]},[e._v(e._s(t.text))])],1)],1)}),0)],1),e._v(" "),i("section",{staticClass:"sec-right"},[i("div",{staticClass:"top-c"},[i("header",[i("div",{staticClass:"h-left"},[i("div",{staticClass:"pointer",attrs:{title:"收缩/展开"},on:{click:e.isShrinkAside}},[i("Icon",{attrs:{type:"ios-apps"}})],1),e._v(" "),i("p",{staticClass:"crumbs"},[e._v(e._s(e.crumbs))])]),e._v(" "),i("div",{staticClass:"h-right"},[i("div",{staticClass:"notice-c",attrs:{title:"查看新消息"},on:{click:e.info}},[i("div",{class:{newMsg:e.hasNewMsg}}),e._v(" "),i("Icon",{attrs:{type:"ios-notifications-outline"}})],1),e._v(" "),i("div",{staticClass:"user-img-c"},[i("img",{attrs:{src:e.userImg}})]),e._v(" "),i("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.userOperate,"on-visible-change":e.showArrow}},[i("div",{staticClass:"pointer"},[i("span",[e._v(e._s(e.userName))]),e._v(" "),i("Icon",{directives:[{name:"show",rawName:"v-show",value:e.arrowDown,expression:"arrowDown"}],attrs:{type:"md-arrow-dropdown"}}),e._v(" "),i("Icon",{directives:[{name:"show",rawName:"v-show",value:e.arrowUp,expression:"arrowUp"}],attrs:{type:"md-arrow-dropup"}})],1),e._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"1"}},[e._v("修改密码")]),e._v(" "),i("DropdownItem",{attrs:{name:"2"}},[e._v("基本资料")]),e._v(" "),i("DropdownItem",{attrs:{divided:"",name:"3"}},[e._v("退出登陆")])],1)],1)],1)]),e._v(" "),i("div",{staticClass:"div-tags"},[i("ul",{staticClass:"ul-c"},e._l(e.tagsArry,function(t,s){return i("li",{class:{active:e.isActive(t.name)},on:{click:function(t){return e.activeTag(s)}}},[i("a",{staticClass:"li-a"},[e._v("\n                            "+e._s(t.text)+"\n                        ")]),e._v(" "),i("Icon",{attrs:{size:"16",type:"md-close"},on:{click:function(t){return e.closeTag(s)}}})],1)}),0),e._v(" "),i("div",{staticClass:"div-icons"},[i("div",{staticClass:"refresh-c",attrs:{title:"刷新当前标签页"},on:{click:e.reloadPage}},[i("Icon",{attrs:{type:"md-refresh"}})],1),e._v(" "),i("div",{staticClass:"tag-options",attrs:{title:"关闭标签"}},[i("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.closeTags}},[i("Icon",{attrs:{type:"ios-options"}}),e._v(" "),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"1"}},[e._v("关闭其他标签")]),e._v(" "),i("DropdownItem",{attrs:{name:"2"}},[e._v("关闭所有标签")])],1)],1)],1)])])]),e._v(" "),i("div",{staticClass:"mask"}),e._v(" "),i("div",{staticClass:"main-content"},[i("div",{staticClass:"view-c"},[i("keep-alive",{attrs:{include:e.keepAliveData}},[e.isShowRouter?i("router-view"):e._e()],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}],staticClass:"loading-c"},[i("Spin",{attrs:{size:"large"}})],1)],1)])])])},staticRenderFns:[]};var c=s("VU/8")(o,r,!1,function(e){s("NLHj")},"data-v-1ef4e45b",null);t.default=c.exports},NLHj:function(e,t){},ZYYH:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAABGdBTUEAALGPC/xhBQAAAahJREFUaAXtmr9KA0EQxr/dS65QkAhioU8ggqBtwM7CF7AQwbey8SGEgL2oCJZ2mjewUPAfIfGyZ/YgaVbmWBi92WMWQsLOMPm+75e9hCPmob9XosXLtthbZU0Npk5YCSpB4QnoR1Q4oFp5SrA2IuENrSfYYQVgTDiubPanLotBN5lg/eQUvYPDwODz+Rnebq9h8zyo/ccGi0E4h3xjE0tb24HmrLcKNEiR7QyW02lgrtqYmW9ysRls0gT13mqQSieFmhJMgRKlUQlS6aRQU4IpUKI0KkEqnRRqSjAFSpRGJUilk0JNCaZAidLYeoI892SICMviG248JjrCkskymA6PNJ4pocbFztrRMVb6+4DNFnt1Lz7v7/B6OYDpdutaa+t/bnB5Zxf+EbPc1wdeBhcsBkWewbIoYvIge0UaJBVHFtkMcl0UvH7OWSxn0MwuIKPhE95vriLz/b19NHyEn8mxDNcfgao721x3sa2F/6rgWCwEvZBKEJMoDmPzGWxncD5Q2rMalEYkVo8SjE1MWr8SlEYkVo8SjE1MWr8SlEYkVo8SjE1MWv8PnhI7yyR2jBwAAAAASUVORK5CYII="}});
//# sourceMappingURL=0.a7e9775222d6ea2d0d87.js.map